project:
  name: RuTextNorm
  remoteDir: /workspace/project
  syncFilters:
    - exclude:
        - .idea/*
        - .git/*
        - data/*
        - training/*
        - '*/__pycache__/*'
    - include:
        - data/train/*
instance:
  region: us-east-2
  instanceType: p2.xlarge
  amiName: SpottyAMI
  maxPrice: 0.4
  volumes:
    - snapshotName: RuTextNorm
      directory: /workspace
      size: 5
  docker:
    image: tensorflow/tensorflow:latest-gpu-py3
    workingDir: /workspace/project
  ports:
    - 6006 # TensorBoard
scripts:
  train: |
    PYTHONPATH=. python text_norm/models/token_classes/train.py
  tensorboard: |
    tensorboard --logdir /workspace/project/training/token_classes
